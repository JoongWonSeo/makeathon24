{
  "$defs": {
    "FieldCondition": {
      "additionalProperties": false,
      "description": "All possible payload filtering conditions",
      "properties": {
        "key": {
          "description": "Payload key",
          "title": "Key",
          "type": "string"
        },
        "match": {
          "anyOf": [
            {
              "$ref": "#/$defs/MatchValue"
            },
            {
              "$ref": "#/$defs/MatchText"
            },
            {
              "$ref": "#/$defs/MatchAny"
            },
            {
              "$ref": "#/$defs/MatchExcept"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Check if object has field with a given value",
          "title": "Match"
        },
        "range": {
          "anyOf": [
            {
              "$ref": "#/$defs/Range"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Check if objects value lies in a given range",
          "title": "Range"
        }
      },
      "required": ["key"],
      "title": "FieldCondition",
      "type": "object"
    },
    "Filter": {
      "additionalProperties": false,
      "properties": {
        "should": {
          "anyOf": [
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/FieldCondition"
                  },
                  {
                    "$ref": "#/$defs/Filter"
                  }
                ]
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "At least one of those conditions should match",
          "title": "Should"
        },
        "must": {
          "anyOf": [
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/FieldCondition"
                  },
                  {
                    "$ref": "#/$defs/Filter"
                  }
                ]
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "All conditions must match",
          "title": "Must"
        },
        "must_not": {
          "anyOf": [
            {
              "items": {
                "anyOf": [
                  {
                    "$ref": "#/$defs/FieldCondition"
                  },
                  {
                    "$ref": "#/$defs/Filter"
                  }
                ]
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "All conditions must NOT match",
          "title": "Must Not"
        }
      },
      "title": "Filter",
      "type": "object"
    },
    "MatchAny": {
      "additionalProperties": false,
      "description": "Exact match on any of the given values",
      "properties": {
        "any": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "items": {
                "type": "integer"
              },
              "type": "array"
            }
          ],
          "description": "Exact match on any of the given values",
          "title": "Any"
        }
      },
      "required": ["any"],
      "title": "MatchAny",
      "type": "object"
    },
    "MatchExcept": {
      "additionalProperties": false,
      "description": "Should have at least one value not matching the any given values",
      "properties": {
        "except": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "items": {
                "type": "integer"
              },
              "type": "array"
            }
          ],
          "description": "Should have at least one value not matching the any given values",
          "title": "Except"
        }
      },
      "required": ["except"],
      "title": "MatchExcept",
      "type": "object"
    },
    "MatchText": {
      "additionalProperties": false,
      "description": "Full-text match of the strings.",
      "properties": {
        "text": {
          "description": "Full-text match of the strings.",
          "title": "Text",
          "type": "string"
        }
      },
      "required": ["text"],
      "title": "MatchText",
      "type": "object"
    },
    "MatchValue": {
      "additionalProperties": false,
      "description": "Exact match of the given value",
      "properties": {
        "value": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "integer"
            },
            {
              "type": "boolean"
            }
          ],
          "description": "Exact match of the given value",
          "title": "Value"
        }
      },
      "required": ["value"],
      "title": "MatchValue",
      "type": "object"
    },
    "PayloadField": {
      "additionalProperties": false,
      "description": "Payload field",
      "properties": {
        "key": {
          "description": "Payload field name",
          "title": "Key",
          "type": "string"
        }
      },
      "required": ["key"],
      "title": "PayloadField",
      "type": "object"
    },
    "Range": {
      "additionalProperties": false,
      "description": "Range filter request",
      "properties": {
        "lt": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "object.key < range.lt",
          "title": "Lt"
        },
        "gt": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "object.key > range.gt",
          "title": "Gt"
        },
        "gte": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "object.key >= range.gte",
          "title": "Gte"
        },
        "lte": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "object.key <= range.lte",
          "title": "Lte"
        }
      },
      "title": "Range",
      "type": "object"
    }
  },
  "allOf": [
    {
      "$ref": "#/$defs/Filter"
    }
  ]
}
